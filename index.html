<!DOCTYPE html> 
<html lang="sv">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>BotJahl ‚Äì AI-chattbot f√∂r din hemsida</title>
  <meta name="description" content="BotJahl √§r en AI-chattbot som du b√§ddar in p√• din webbplats. Starta gratis i 14 dagar ‚Äì laddas med dina dokument.">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="site.css?v=2025-09-13a">
</head>
<body>

  <!-- NAV -->
  <nav>
    <div class="container">
      <a href="index.html" class="brand" aria-label="BotJahl startsida">
        <svg viewBox="0 0 48 48" fill="none" aria-hidden="true" width="28" height="28">
          <rect x="4" y="6" width="40" height="30" rx="10" fill="url(#g1)"/>
          <path d="M16 28c6 4 10 4 16 0" stroke="rgba(10,15,31,.7)" stroke-width="3" stroke-linecap="round"/>
          <circle cx="19" cy="20" r="2.4" fill="#0a0f1f"/>
          <circle cx="29" cy="20" r="2.4" fill="#0a0f1f"/>
          <path d="M30 38l-6-4-6 4 2.5-6.5" fill="url(#g2)" opacity=".9"/>
          <defs>
            <linearGradient id="g1" x1="4" y1="6" x2="46" y2="36"><stop stop-color="#60a5fa"/><stop offset=".6" stop-color="#22d3ee"/><stop offset="1" stop-color="#a78bfa"/></linearGradient>
            <linearGradient id="g2" x1="18" y1="32" x2="30" y2="38"><stop stop-color="#22d3ee"/><stop offset="1" stop-color="#60a5fa"/></linearGradient>
          </defs>
        </svg>
        <span>BotJahl</span>
      </a>

      <div class="nav-links">
        <a href="#demo" onclick="window.botjahlOpenDemo?.(); return false;">Demo</a>
        <a href="#pricing">Priser</a>
        <a href="#starta">Starta gratis</a>
        <a class="btn secondary" href="admin.html" aria-label="√ñppna adminportalen">Logga in</a>
      </div>
    </div>
  </nav>

  <!-- HERO -->
  <header class="hero">
    <div class="container wrap">
      <div class="card">
        <div class="badge">Plug-in & run</div>
        <h1>AI-chattbot som svarar med ditt inneh√•ll</h1>
        <p class="lead">
          BotJahl g√∂r det enkelt f√∂r f√∂retag att skapa en smart chattbot som
          svarar utifr√•n ditt eget material ‚Äì utan teknisk kunskap.
        </p>
        <p class="muted">
          Ladda upp dokument eller l√•t oss l√§sa in din webbplats. Du f√•r en f√§rdig
          chatt som kan b√§ddas in direkt p√• din sida.
        </p>

        <div class="actions">
          <a href="#signup" class="btn primary">Starta gratis</a>
          <a href="admin.html" class="btn ghost">Redan kund? Logga in</a>
          <a href="#how-it-works" class="btn secondary">S√• fungerar det</a>
        </div>
      </div>

      <div class="card stack">
        <div class="feature">
          <div class="dot"></div>
          <div>
            <strong>Enkel installation</strong><br />
            Kopiera en f√§rdig <code>&lt;iframe&gt;</code>-kod.
          </div>
        </div>
        <div class="feature">
          <div class="dot"></div>
          <div>
            <strong>Tr√§nas p√• ditt material</strong><br />
            Ladda upp dokument eller indexera din webbplats.
          </div>
        </div>
        <div class="feature">
          <div class="dot"></div>
          <div>
            <strong>Byggd f√∂r f√∂retag</strong><br />
            Betalning via Stripe. GDPR-v√§nlig. Inga bindningstider.
          </div>
        </div>
      </div>
    </div>
  </header>

 

  <!-- S√Ö FUNKAR DET ‚Äì MINI-TABELL -->
  <section id="how-it-works">
    <div class="container narrow stack">
      <h2 class="center">S√• fungerar det</h2>
      <div class="card glass stack">
        <p class="muted">
          BotJahl √§r en AI-chattbot som ni b√§ddar in p√• er befintliga webbplats.
          Den svarar p√• fr√•gor fr√•n bes√∂kare med utg√•ngspunkt i <strong>ert eget inneh√•ll</strong> ‚Äì till exempel informationssidor, PDF:er och interna dokument.
        </p>

        <div class="grid grid-2">
          <div>
            <h3>Vad ni g√∂r</h3>
            <ol class="muted" style="padding-left:18px; margin:0;">
              <li><strong>Registrerar er</strong> ‚Äì fyll i f√∂retagsnamn, webbplats och e-post.</li>
              <li><strong>L√§gger in betalmetod</strong> via Stripe (kortbetalning). Ni kan avsluta n√§r som helst.</li>
              <li><strong>Klistrar in kodsnutten</strong> p√• den sida d√§r chatten ska synas.</li>
              <li><strong>Laddar upp material</strong> i adminportalen: PDF/DOCX/TXT/MD eller befintliga webbsidor.</li>
            </ol>
          </div>

          <div>
            <h3>Vad BotJahl g√∂r</h3>
            <ol class="muted" style="padding-left:18px; margin:0;">
              <li><strong>Skapar en unik bot</strong> kopplad till ert kund-ID och er webbplats.</li>
              <li><strong>Genererar en f√§rdig kodsnutt</strong> som fungerar direkt p√• er sida.</li>
              <li><strong>L√§ser och indexerar</strong> ert inneh√•ll automatiskt i bakgrunden.</li>
              <li><strong>Svarar p√• fr√•gor dygnet runt</strong> och anv√§nder ert material som faktabank.</li>
            </ol>
          </div>
        </div>

        <p class="muted">
          Resultatet blir en <strong>digital medarbetare</strong> som avlastar kundtj√§nst, minskar antalet √•terkommande fr√•gor
          och g√∂r det enklare f√∂r bes√∂kare att hitta vad de s√∂ker ‚Äì utan att ni beh√∂ver n√•gon egen IT-kompetens.
        </p>
      </div>
    </div>
  </section>

  <!-- PRISER -->
  <section id="pricing" class="container">
    <h2 class="center">Priser</h2>
    <p class="muted center">V√§lj en niv√• som passar ‚Äì du kan alltid uppgradera senare.</p>

    <div class="pricing-grid">
      <!-- Bas -->
      <article class="plan plan--active" aria-label="Bas">
        <header class="plan__header">
          <h3>Bas</h3>
          <p class="plan__tagline">F√∂r att komma ig√•ng</p>
        </header>
        <div class="plan__price">
          <span class="plan__amount">399</span><span class="plan__currency">kr</span><span class="plan__period">/m√•n</span>
        </div>
        <ul class="plan__features">
          <li>1 dom√§n/webbplats</li>
          <li>Upp till ~1 000 fr√•gor/m√•n*</li>
          <li>Dokument upp till 50 MB</li>
          <li>Inb√§ddad chat-widget</li>
          <li>Grundl√§ggande support via e-post</li>
          <li>GDPR-v√§nlig drift</li>
        </ul>
        <div class="plan__cta">
          <button id="buy-bas" class="btn primary">Starta provperiod</button>
          <p class="small muted">*Exakt kapacitet beror p√• fr√•gel√§ngd & modellkostnad.</p>
        </div>
      </article>

      <!-- Plus -->
      <article class="plan plan--soon" aria-label="Plus">
        <header class="plan__header">
          <h3>Plus</h3>
          <span class="badge soon">Kommer snart</span>
          <p class="plan__tagline">Mer kapacitet & funktioner</p>
        </header>
        <div class="plan__price">
          <span class="plan__amount">999</span><span class="plan__currency">kr</span><span class="plan__period">/m√•n</span>
        </div>
        <ul class="plan__features">
          <li>Upp till 3 dom√§ner/webbplatser</li>
          <li>Upp till ~10 000 fr√•gor/m√•n</li>
          <li>St√∂rre dokumentm√§ngd (upp till 250 MB)</li>
          <li>F√∂rb√§ttrad s√∂k och tr√§ffs√§kerhet</li>
          <li>Prioriterad support</li>
          <li>Grundl√§ggande rapportering</li>
        </ul>
        <div class="plan__cta">
          <button class="btn secondary" disabled aria-disabled="true">Kommer snart</button>
        </div>
      </article>

      <!-- Premium -->
      <article class="plan plan--soon" aria-label="Premium">
        <header class="plan__header">
          <h3>Premium</h3>
          <span class="badge soon">Kommer snart</span>
          <p class="plan__tagline">F√∂r kommuner & st√∂rre organisationer</p>
        </header>
        <div class="plan__price">
          <span class="plan__amount">2 499</span><span class="plan__currency">kr</span><span class="plan__period">/m√•n</span>
        </div>
        <ul class="plan__features">
          <li>Upp till 5 dom√§ner</li>
          <li>Upp till ~50 000 fr√•gor/m√•n</li>
          <li>Stora dokumentvolymer (upp till 1000 MB)</li>
          <li>Avancerad s√∂kteknik och anpassningar</li>
          <li>SLA & prioriterad support</li>
          <li>M√∂jlighet till integrationer & SSO</li>
        </ul>
        <div class="plan__cta">
          <button class="btn secondary" disabled aria-disabled="true">Kommer snart</button>
        </div>
      </article>
    </div>
  </section>

  <!-- SIGNUP -->
  <section id="starta">
    <div class="container narrow">
      <h2 class="center">Starta gratis i 14 dagar</h2>
      <div class="card glass">
        <form id="signup" autocomplete="on" class="stack">
          <div>
            <label for="org">F√∂retagsnamn</label>
            <input id="org" name="name" maxlength="80" placeholder="F√∂retagsnamn" autocomplete="organization" required />
          </div>

          <div>
            <label for="site">Webbplats</label>
            <input id="site" name="websiteUrl" maxlength="255" placeholder="https://‚Ä¶ eller www.dittf√∂retag.se" inputmode="url" required />
          </div>

          <div>
            <label for="mail">E-post</label>
            <input id="mail" name="email" maxlength="200" type="email" placeholder="E-post" autocomplete="email" required />
          </div>

          <div class="terms-row">
            <label for="terms" class="terms-label">
              <input type="checkbox" id="terms" name="terms" required />
              <span>
                Jag accepterar
                <a href="/terms.html" target="_blank" rel="noopener">anv√§ndarvillkor</a>
                och
                <a href="/privacy.html" target="_blank" rel="noopener">integritetspolicy</a>
                och 
                <a href="/dpa.html">personuppgiftsbitr√§desavtalet (DPA)</a>.
              </span>
            </label>
          </div>

          <div class="actions">
            <button class="btn primary" type="submit">Skapa min bot</button>
          </div>
          <a href="admin.html" class="btn ghost">Redan kund? Logga in</a>

          <p class="small muted">
            Du f√•r ett kund-ID och en betalningsl√§nk. Kodsnutten visas efter att betalmetod lagts in.
          </p>
        </form>
        <div id="signup-result"></div>
      </div>
    </div>
  </section>

<!-- CONTACT -->
<section>
  <div class="container narrow stack center">
    <h2>Vill du boka en demo eller introduktion?</h2>
    <p class="muted">
      Kontakta oss 
      <a href="mailto:faijahl75@gmail.com" class="btn ghost small" style="margin-left:6px;">
        h√§r
      </a>
    </p>
  </div>
</section>

  <script>
  // Detta v√§rde ers√§tts av GitHub Actions vid deploy
  window.BOTJAHL_API_BASE = "__API_BASE__";
  </script>

  <!-- JS -->
  <script>
    // Enkel API-resolver: ?api=‚Ä¶ ‚Üí window.BOTJAHL_API_BASE
    async function resolveApiBase() {
      const qs         = new URLSearchParams(location.search);
      const fromQuery  = qs.get("api");
      const fromWindow = (window.BOTJAHL_API_BASE || "").trim();

      const raw = (fromQuery || fromWindow || "").trim();
      if (!raw) {
        throw new Error("API-bas saknas. Kontrollera att __API_BASE__ har ersatts vid deploy.");
      }

      return raw.replace(/\/+$/, "");
    }

    const API_PROMISE      = resolveApiBase();
    const DEMO_WIDGET_BASE = "https://westjahlconsulting.github.io/ai-chatbot-frontend/widget.html";
    const DEMO_CUSTOMER_ID = "ceb2df2";


  // Stabil "session" per bes√∂kare (lagras i sessionStorage)
  function getOrCreateDemoSessionId(){
    const k = "botjahl.demo.sid";
    let v = sessionStorage.getItem(k);
    if (!v){
      // hyfsat unikt men stabilt under fliken
      v = (self.crypto?.randomUUID?.() || (Date.now().toString(36)+Math.random().toString(36).slice(2)));
      sessionStorage.setItem(k, v);
    }
    return v;
  }

  // S√§tt demo-iframe n√§r API-basen √§r k√§nd ‚Äì med preview=1 + sessionId
  (async () => {
    try{
      const API = await API_PROMISE;
      const iframe = document.getElementById("botjahl-demo");
      if (iframe){
        const sid = getOrCreateDemoSessionId();
        iframe.src =
  `${DEMO_WIDGET_BASE}?customerId=${encodeURIComponent(DEMO_CUSTOMER_ID)}`
  + `&api=${encodeURIComponent(API)}&preview=1&sessionId=${encodeURIComponent(sid)}`
  + `&demo=1`;
      }
    }catch(err){
      console.warn("Kunde inte s√§tta demo-iframe:", err);
    }
  })();

    const out = document.getElementById('signup-result');
    const okBanner  = (html) => `<div class="banner ok">${html}</div>`;
    const errBanner = (html) => `<div class="banner err">${html}</div>`;

    // Signup
    document.getElementById('signup').addEventListener('submit', async (e) => {
      e.preventDefault();
      const f = e.target;

      if (!f.terms.checked) {
        out.innerHTML = errBanner("Du m√•ste acceptera anv√§ndarvillkoren.");
        out.scrollIntoView({ behavior: "smooth", block: "start" });
        return;
      }

      let url = f.websiteUrl.value.trim();
      if (!/^https?:\/\//i.test(url)) url = 'https://' + url;

const body = {
  name: f.name.value.trim(),
  websiteUrl: url,
  email: f.email.value.trim(),
  termsAccepted: !!f.terms.checked
};


      out.innerHTML = `<span class="small muted">Skapar bot‚Ä¶</span>`;

      try{
        const API = await API_PROMISE;
        const res = await fetch(API + "/api/public/signup", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(body)
        });
        const data = await res.json().catch(() => ({}));

       if (res.status === 409) {
  out.innerHTML = errBanner(`
    <p><strong>Det finns redan en bot registrerad med denna e-post och webbplats.</strong></p>
    <p class="small muted">
      Om det √§r ditt f√∂retag, anv√§nd knappen <strong>"Redan kund? Logga in"</strong> ovan
      f√∂r att logga in i adminportalen. Kontakta supporten om du beh√∂ver hj√§lp.
    </p>
  `);
  out.scrollIntoView({ behavior: "smooth", block: "start" });
  return;
}



        if (!res.ok) {
          const msg = (data && data.message) || "N√•got gick fel. F√∂rs√∂k igen om en stund.";
          out.innerHTML = errBanner(msg);
          out.scrollIntoView({ behavior: "smooth", block: "start" });
          return;
        }

        const cid = data.customerId;
        out.innerHTML = okBanner(`
        <p><strong>Klart!</strong> Ditt kund-ID √§r <code>${cid}</code>.</p>
        ${
          data.checkoutUrl
            ? `<p><a class="btn primary" href="${data.checkoutUrl}" target="_blank" rel="noopener">√ñppna Stripe Checkout</a></p>`
            : `<p class="muted">Kunde inte skapa Checkout-l√§nk just nu. Testa igen.</p>`
        }
        <p class="small muted">
          N√§r betalmetod lagts in kan du h√§mta din kodsnutt h√§r:
          <a href="success.html?cid=${encodeURIComponent(cid)}">success.html</a>
          eller ladda upp dokument i <a href="admin.html?cid=${encodeURIComponent(cid)}">Admin</a>.
        </p>
      `);
        out.scrollIntoView({ behavior: "smooth", block: "start" });
      }catch(err){
        out.innerHTML = errBanner(`N√§tverksfel: ${err.message || "ok√§nt fel"}`);
        out.scrollIntoView({ behavior: "smooth", block: "start" });
      }
    });

    // Pris: Bas ‚Üí checkout om kund √§r k√§nd, annars scrolla till signup
    (function hookPricing(){
      const buy = document.getElementById("buy-bas");
      if (!buy) return;

      async function getJson(url){
        const r = await fetch(url, { cache: "no-store" });
        const t = await r.text();
        try{ return { ok: r.ok, status: r.status, data: JSON.parse(t) }; }
        catch{ return { ok: r.ok, status: r.status, data: {} }; }
      }

      buy.addEventListener("click", async () => {
        const cid = window.BOTJAHL_CUSTOMER_ID || "";
        if (!cid){
          document.getElementById("starta").scrollIntoView({ behavior: "smooth", block: "start" });
          return;
        }

        buy.disabled = true;
        const API = await API_PROMISE;
        const url = `${API}/api/public/checkout-link?customerId=${encodeURIComponent(cid)}`;
        const r = await getJson(url);
        buy.disabled = false;

        if (r.ok && r.data && r.data.url) {
          location.href = r.data.url;
        } else {
          alert((r.data && (r.data.error || r.data.message)) || "Kunde inte √∂ppna Checkout.");
        }
      });
    })();
  </script>

  <footer>
    <div class="container">
      ¬© 2025 BotJahl ‚Äì Enkelt. Smart. Anpassat.
      ¬∑ <a href="terms.html">Anv√§ndarvillkor</a>
      ¬∑ <a href="privacy.html">Integritetspolicy</a>
      ¬∑ <a href="dpa.html">Personuppgiftsbitr√§desavtal (DPA)</a>
    </div>
  </footer>

    <!-- Robust smooth scroll (bara om m√•l finns) -->
  <script>
    document.addEventListener('click', (e) => {
      const a = e.target.closest('a[href^="#"]');
      if (!a) return;

      const sel = a.getAttribute('href');

      // L√•t "Demo"-l√§nken sk√∂tas av JS-funktionen botjahlOpenDemo i st√§llet
      if (sel === '#demo') {
        if (window.botjahlOpenDemo) {
          e.preventDefault();
          window.botjahlOpenDemo();
        }
        return;
      }

      const target = document.querySelector(sel);
      if (!target) return;
      e.preventDefault();
      target.scrollIntoView({ behavior: 'smooth', block: 'start' });
    });
  </script>

  <!-- Chat launcher nere till h√∂ger -->
  <button id="botjahl-launcher" type="button" aria-label="√ñppna demo-chat">
    <span class="bj-icon">üí¨</span>
    <span class="bj-label">Testa demot</span>
  </button>

  <!-- Chat-widget (nuvarande demo-chatt) -->
  <!-- Chat-widget (nuvarande demo-chatt) -->
<div id="botjahl-widget" class="botjahl-hidden">
  <button id="botjahl-close" type="button" class="botjahl-close" aria-label="St√§ng chatten">√ó</button>

   <!-- DEMO -->
  <section id="demo">
    <div class="container stack">
      <h2 class="center">Testa BotJahl</h2>
      <p class="muted center">
        Demot √§r kopplat till v√•r testkund. Fr√•ga om produkten och hur den fungerar.
        Demot √§r begr√§nsat till 6 fr√•gor per bes√∂kare.
      </p>
      <div id="iframe-demo" class="narrow">
        <div class="iframe-wrapper">
          <iframe
            id="botjahl-demo"
            loading="lazy"
            referrerpolicy="no-referrer"
            sandbox="allow-scripts allow-forms allow-same-origin"
            title="BotJahl demo-chatt"
            aria-label="Inb√§ddad demo av BotJahl"
          ></iframe>
        </div>
      </div>
    </div>
  </section>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const launcher = document.getElementById('botjahl-launcher');
    const widget   = document.getElementById('botjahl-widget');
    const closeBtn = document.getElementById('botjahl-close');

    if (!launcher || !widget) return;

    function openWidget() {
      widget.classList.add('botjahl-open');
      widget.classList.remove('botjahl-hidden');
      // se till att hela widgeten hamnar i bild
      widget.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }

    function closeWidget() {
      widget.classList.remove('botjahl-open');
      widget.classList.add('botjahl-hidden');
    }

    function toggleWidget() {
      const isOpen = widget.classList.contains('botjahl-open');
      if (isOpen) closeWidget(); else openWidget();
    }

    // Klick p√• bubblan nere till h√∂ger
    launcher.addEventListener('click', function (e) {
      e.preventDefault();
      toggleWidget();
    });

    // Klick p√• krysset st√§nger
    if (closeBtn) {
      closeBtn.addEventListener('click', function (e) {
        e.preventDefault();
        closeWidget();
      });
    }

    // ESC-tangent st√§nger widgeten
    document.addEventListener('keydown', function (e) {
      if (e.key === 'Escape') {
        closeWidget();
      }
    });

    // G√∂r global funktion som "Demo" i menyn kan anropa
    window.botjahlOpenDemo = function () {
      openWidget();
    };
  });
</script>


</body>
</html>
